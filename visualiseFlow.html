<html>
<!-- Styles -->
<style>
#chartdiv {
  width: 100%;
  height: 500px
}

</style>
<div id="chartdiv"></div>

<!-- Resources https://css-tricks.com/anatomy-of-a-malicious-script-how-a-website-can-take-over-your-browser/-->
<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->
<script>
// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

var chart = am4core.create("chartdiv", am4charts.SankeyDiagram);
chart.hiddenState.properties.opacity = 0; // this creates initial fade-in

chart.data = [
  { from: "AdPixel", to: "ISP: Virgin Mobile", value: 100 },
  { from: "AdPixel", to: "ISP: 02", value: 80 },
  { from: "AdPixel", to: "ISP: Vodafone", value: 40 },
  { from: "AdPixel", to: "ISP: Tiscali", value: 30 },
  { from: "ISP: Virgin Mobile", to: "G", value: 50 },
  { from: "ISP: 02", to: "I", value: 20 },
  { from: "ISP: Vodafone", to: "H", value: 30 },
  { from: "ISP: Tiscali", to: "H", value: 60 },    
  { from: "G", to: "SafeJS", value: 50 },
  { from: "I", to: "DirtyJS", value: 10 },
  { from: "H", to: "DirtyJS", value: 90 }    
];

let hoverState = chart.links.template.states.create("hover");
hoverState.properties.fillOpacity = 0.6;

chart.dataFields.fromName = "from";
chart.dataFields.toName = "to";
chart.dataFields.value = "value";

// for right-most label to fit
chart.paddingRight = 30;

// make nodes draggable
var nodeTemplate = chart.nodes.template;
nodeTemplate.inert = true;
nodeTemplate.readerTitle = "Drag me!";
nodeTemplate.showSystemTooltip = true;
nodeTemplate.width = 20;

// make nodes draggable
var nodeTemplate = chart.nodes.template;
nodeTemplate.readerTitle = "Click to show/hide or drag to rearrange";
nodeTemplate.showSystemTooltip = true;
nodeTemplate.cursorOverStyle = am4core.MouseCursorStyle.pointer
</script>

<!-- HTML -->
<div id="chartdiv"></div>
</html>
